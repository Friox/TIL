# 2025. 06. 02

## Terraform
Terraform은 기존 kubectl로 해야하는 일을 자동화해주는 것에 더하여
인프라스트럭처 전체를 코드로 선언하고, 그 상태를 자동으로 관리, 배포해준다.

내부에서 사용하는 개념으로 크게 5가지가 있다.  
* 프로비저닝(Provisioning) : 네트워크나 컴퓨팅 자원을 준비하는 작업, 준비 단계
* 프로바이더(Provider) : Terraform과 외부 서비스를 연결해주는 기능 (AWS, GCP, Azure 등등)
* 리소스(Resource) : 프로바이더가 제공해주는 조작 가능한 대상의 최소 단위 (예: Amazon EC2의 가상머신 리소스)
* 계획(Plan) : 작성한 .tf 파일의 내용을 실제로 환경에 적용가능한지 검토 및 확인하는 작업
* 적용(Apply) : 작성한 .tf 파일을 기반으로 실제로 환경을 적용하는 작업

이 도구를 통해 다양한 이점을 얻을 수 있다.
* 자동화 : 코드로 환경을 구성하기 때문에, 서버 운영 및 관리가 모두 자동화 될 수 있다.
* 속도, 안전 : 코드로 실행되기 때문에 수동으로 작업하는것보다 훨씬 빠르며, 실수를 방지할 수 있다.
* 문서화 : 모든 인프라가 코드로 기록 및 관리 되기 때문에 자동으로 문서화가 가능하다.
* 형상관리 : 코드를 git으로 관리할 수 있기 때문에 변경 기록을 쉽게 확인할 수 있다.

## ArgoCD
Kubernetes 환경에서 애플리케이션의 지속적 배포(Continuous Delivery, CD)와 선언적 관리 자동화 툴이다.  
GitOps 방식으로 애플리케이션의 상태를 Git 저장소에 정의된 대로 자동으로 동기화한다.

사용자는 Git에 원하는 상태를 정의하면, ArgoCD가 실제 클러스터 상태와 비교하여 차이가 있으면 자동으로 동기화한다.  
또한 웹 UI, CLI, API 등 다양한 인터페이스를 제공하고, 배포 이력 관리, 롤백, 알림을 지원한다.

예를 들어 개발팀이 Nginx 웹서버를 Kubernetes에 배포하고 운영한다고 가정해보자.  
개발자가 Nginx 배포를 위한 YAML 파일을 Git 저장소에 커밋하면, ArgoCD는 Git 저장소를 지속적으로 모니터링 하다가  
파일이 변경되면 자동으로 Kubernetes 클러스터에 변경된 내용을 반영한다.  
파드의 Replica 수를 2개에서 3개로 변경하면, Git에 변경사항을 푸시하는 것만으로 클러스터의 실제 파드 수가 자동으로 3개로 맞춰진다.

재해 복구 시나리오에서도 사용된다.  
운영 중인 Kubernetes 클러스터에 장애가 발생해 새 클러스터로 이전해야할 때,  
기존 클러스터와 동일한 Git 저장소를 새 클러스터의 ArgoCD와 연결한다.  
ArgoCD가 Git에 정의된 애플리케이션 상태를 새 클러스터에 자동으로 재배포하여, 빠르게 서비스 복구가 가능하다.

공부할것이 너무많다... ㅠㅠ