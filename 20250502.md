# 2025. 05. 02.

## π€ JPA Entity `optional`, `nullable` μ†μ„±
JPA Entityλ¥Ό μ •μν• λ•, μ™Έλν‚¤ κ°™μ€κ²½μ° `@ManyToOne` λλ” `@OneToOne` μ–΄λ…Έν…μ΄μ…μ—  
`optional` μ†μ„±μ„, `@JoinColumn` μ–΄λ…Έν…μ΄μ…μ— `nullable` μ†μ„±μ„ μ‚¬μ©ν•κ³¤ ν•λ‹¤.  
μ–Έλ»λ³΄λ©΄ `null` κ°’μ„ μ μ–΄ν•λ” λ™μΌν• μ†μ„±κ°™μ§€λ§ μ‚΄μ§ λ‹¤λ¥΄λ‹¤κ³  ν•λ‹¤.

### `optional` μ†μ„±
* **λ€μƒ μ–΄λ…Έν…μ΄μ…** : `@Basic`, `@ManyToOne` λ“± JPA λ§¤ν•‘ μ–΄λ…Έν…μ΄μ…
* Java Entityμ ν”„λ΅νΌν‹°κ°€ **λ°νƒ€μ„ μ‹μ **μ— `null`μ΄ λ  μ μλ”μ§€ μ—¬λ¶€λ¥Ό μ§€μ •ν•λ‹¤.
* `false` μΌ κ²½μ° JPA κµ¬ν„μ²΄λ” μΏΌλ¦¬ μƒμ„±μ΄λ‚ `EntityManager.persist()` μ‹μ μ—μ„  
  ν•΄λ‹Ή ν•„λ“κ°€ `null`μΈμ§€ κ²€μ¦ν•΄ μμ™Έλ¥Ό λ°μƒμ‹ν‚¨λ‹¤.
* => λ°νƒ€μ„ μ‹μ μ— μ μ•½μ„ κ²€μ¦ν•λ‹¤.

### `nullable` μ†μ„±
* **λ€μƒ μ–΄λ…Έν…μ΄μ…** : `@Column`, `@JoinColumn`
* λ°μ΄ν„°λ² μ΄μ¤ ν…μ΄λΈ”μ„ μƒμ„±ν•  λ• ν•΄λ‹Ή μ»¬λΌμ— `NOT NULL` μ μ•½μ΅°κ±΄μ„ μ¶”κ°€ν• μ§€ κ²°μ •ν•λ‹¤.  
* => DB λ λ²¨μ—μ„ μ μ•½μ„ κ²€μ¦ν•λ‹¤.

## π€ `.properties`, `.yml` μ°μ„ μμ„
`.properties` νμΌμ΄ `.yml` νμΌλ³΄λ‹¤ μ°μ„ ν•λ‹¤.

## π€ IntelliJ IDEA μ—μ„ ν”„λ΅μ νΈμ— devtools μ¶”κ°€ν•κΈ°
ν”„λ΅μ νΈλ¥Ό μƒμ„±ν• λ• κΉλΉ΅ μκ³  `spring-boot-devtools` μμ΅΄μ„±μ„ μ¶”κ°€ν•μ§€ μ•μ•λ‹¤.  
λ•λ¶„μ— μ½”λ“ μμ • ν›„ μλ™ μ¬μ‹μ‘μ΄ μ‘λ™ν•μ§€ μ•μ•λ‹¤.  
devtoolsλ¥Ό μ΄μ©ν• μλ™ μ¬μ‹μ‘μ„ ν™μ„±ν™” ν•λ ¤λ©΄ λ‹¤μ κ³Όμ •μ„ κ±°μΉλ‹¤.  
Gradle κΈ°μ¤€.

### 1. `build.gradle`μ— μμ΅΄μ„± μ¶”κ°€
`dependencies` μ„Ήμ…μ— 'Add Starters'λ¥Ό μ΄μ©ν•κ±°λ‚ λ‹¤μ μ½”λ“λ¥Ό μ¶”κ°€ν•λ‹¤.
```gradle
developmentOnly 'org.springframework.boot:spring-boot-devtools'
```

### 2. μ‹¤ν–‰ μµμ… μ„¤μ •
1. Shift λ‘λ²λλ¬ κ²€μƒ‰μ°½μ„ μ—° λ’¤, `edit configuration` λ¥Ό κ²€μƒ‰ν•μ—¬ μ—°λ‹¤.
2. μμ‹ μ—κ² λ§λ” μ‹¤ν–‰μµμ…μ„ ν΄λ¦­ν•κ³ , `Build and run` μ„Ήμ…μ `Modifiy options`λ¥Ό λ„λ¥Έλ‹¤.
3. `On frame deactivation` - `Update classes and resources` ν΄λ¦­.
4. 'OK' λ²„νΌμ„ λλ¬ μ„¤μ •μ„ λ°μν•λ‹¤.

μ΄λ ‡κ² ν•λ©΄ μ°½μ΄ λΉ„ν™μ„±ν™” λμ„ λ•(ν¬μ»¤μ‹±μ΄ ν•΄μ λμ„ λ•), λ³€κ²½μ„ κ°μ§€ν•κ³  λ‹¤μ‹μ‹μ‘ν•΄μ¤€λ‹¤.

## π€ JPA κ΄€λ ¨ Repository, Service, Controller λ©”μ„λ“ λ…λ… κ·μΉ™
μ—­ν• μ„ ν™•μ‹¤ν•κ² κµ¬λ¶„ν•μ.
* Repository κ³„μΈµ : λ°μ΄ν„°λ¥Ό 'κ²€μƒ‰'λ§ ν•λ‹¤.
* Service κ³„μΈµ : Repositoryλ΅ λ¶€ν„° λ°›μ•„μ¨ `Optional`κ°μ²΄λ¥Ό μ²λ¦¬ ν›„ λ°μ΄ν„°κ°€ μ—†μΌλ©΄ μμ™Έμ²λ¦¬.
* Controller κ³„μΈµ : Service κ³„μΈµμ„ μ΄μ©ν•μ—¬ μ—”λ“ν¬μΈνΈ λ΅μ§ μν–‰

κ·ΈλΌ λ©”μ„λ“ μ΄λ¦„μ€?
* Repository
  * `findByXXX`
  * `Optional<T>` λλ” `List<T>`λ΅ ν•­λ©μ΄ μ—†μ„ μλ„ μλ‹¤λ” μ‚¬μ‹¤μ„ λ…μ‹.
  * νΈμ¶λ¶€μ—μ„ `orElseThrow()`, `isPresent()`, `ifPresent()` λ“±μΌλ΅ ν›„μ²λ¦¬ κ°•μ .
* Service
  * `getEntityByXXX` : λ°μ΄ν„°κ°€ μ—†μμ„ ν—μ©ν•μ§€ μ•μ„ λ•. (μμ™Έμ²λ¦¬ ν•„μ”)
  * `findEntityByXXX` : λ°μ΄ν„°κ°€ μ—†μμ„ ν—μ©ν•  λ•.
* Controller
  * `getEntityByXXX`
  * HTTP λ©”μ„λ“μ— λ§μ¶° ν†µμΌν•λ©΄ μΆ‹λ‹¤. (`Get`, `Post`, ...)