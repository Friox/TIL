# 2025. 05. 23.

## 🍀 CORS
**Cross-Origin Resource Sharing**, 교차 출처 리소스 공유  
웹 브라우저가 자신의 출처가 아닌 다른 출처로부터 자원을 로딩하는 것을 허용하도록 제어하는 메커니즘  
출처(Origin)는 프로토콜, 도메인, 포트 세 요소로 구성되며, 이 중 하나라도 다르면 서로 다른 출처로 간주된다.

## 🍀 CORS의 필요성
웹 브라우저는 기본적으로 **동일 출처 정책(Same Origin Policy)** 를 따른다.  
이것은 보안상의 이유로 스크립트에서 시작한 교차 출처 HTTP 요청을 제한하는 정책이다.  
하지만 현대 웹 개발에서는 여러 가지 이유로 교차 출처 요청이 필요해졌다.
* 프론트엔드와 백엔드 서버 분리
* 다룬 출처의 데이터 사용
* MSA

## 🍀 CORS 작동 원리
**preflight 요청(예비 요청) 메커니즘** 을 사용한다.  
1. Preflight 요청
* 프론트엔드 -> 백엔드 : `OPTIONS` 메서드로 예비 요청 전송
* 백엔드 -> 프론트엔드 : 요청 허가 여부 응답

2. 실제 요청
* 프론트엔드 -> 백엔드 : 실제 요청(`GET`, `POST` 등) 전송 시 `Origin` 헤더 추가
* 백엔드 -> 프론트엔드 : 응답 시 `Access-Control-Allow-Origin` 헤더 추가
* 프론트엔드 : CORS 정책 위반 여부 확인

## 🍀 CORS 설정은 어디에다가?
CORS 설정은 백엔드에서 하는 것이 정석적이고 권장되는 방법이다.  
* 보안성
    * 서버에서 직접 접근 권한을 제어할 수 있어 더 안전하다.
    * 허용할 출처를 서버에서 명시적으로 관리할 수 있다.
* 근본적 해결
    * CORS는 서버의 응답 헤더를 통해 작동하므로 서버에서 설정해야 함.
    * `Access-Control-Allow-Origin`, `Access-Control-Allow-Methods` 등의 헤더는 서버에서 설정.
* 설정 과정
    * 프론트엔드에서 설정할 경우 백엔드보다 설정할것이 훨씬 많아진다.
    * 또한 배포환경도 고려해야한다.